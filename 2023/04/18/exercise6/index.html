<!DOCTYPE html><html lang="zh-CN"><head><meta name="referrer" content="no-referrer"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Ahh"><title>exercise6 · Ahh's blog</title><meta name="description" content="终于考完了…又开始康复训练了，

纯菜，发现很多东西去年会写的今年已经不会了，我完蛋了
算了，写点东西下来吧
依然在看雨巨的算法入门课
啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊我怎么还在入门啊

 花店橱窗
传送门：花店橱窗
题意自己看去吧
线性dp+还原
f[i][j]f[i] [j]f[i][j]"><meta name="keywords" content="Blog,博客,Hexo"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.webp"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/insight.css"><link rel="stylesheet" href="/css/search.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><script src="/js/jquery.js"></script><link href="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/KaTeX/0.10.2/katex.min.css" rel="stylesheet"><meta name="generator" content="Hexo 6.2.0"></head><body><div class="page-top animated fadeInDown"><div class="nav"><li> <a href="/">首页</a></li><li> <a href="/archives">归档</a></li><li> <a href="/tags">标签</a></li><li> <a href="/about">关于</a></li><li> <a href="/links">友链</a></li></div><div class="information"><div class="nav_right_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li><li><a class="fa fa-search" onclick="openWindow();"></a></li></div><div class="avatar"><img src="/images/pic.jpg"></div></div></div><div class="sidebar animated fadeInDown"><div class="sidebar-top"><div class="logo-title"><div class="title"><img src="/images/pic.jpg" style="width:220px;" alt="favicon"><h3 title=""><a href="/">Ahh's blog</a></h3><div class="description"><p>程序员对世界说，我学编程都是为了你好</p></div></div><ul class="social-links"><li><a href="mailto:wxhxyyzm@163.com"><i class="fa fa-envelope"></i></a></li><li><a target="_blank" rel="noopener" href="https://weibo.com/u/3042191792"><i class="fa fa-weibo"></i></a></li></ul></div><details class="ltr" open><summary>目录</summary><div class="tocmenu"><p><ol class="toclist"><li class="toclist-item toclist-level-2"><a class="toclist-link" href="#%E8%8A%B1%E5%BA%97%E6%A9%B1%E7%AA%97"><span class="toclist-number">1.</span> <span class="toclist-text"> 花店橱窗</span></a></li><li class="toclist-item toclist-level-2"><a class="toclist-link" href="#%E4%BC%A0%E7%90%83%E6%B8%B8%E6%88%8F"><span class="toclist-number">2.</span> <span class="toclist-text"> 传球游戏</span></a></li><li class="toclist-item toclist-level-2"><a class="toclist-link" href="#%E5%90%88%E5%94%B1%E9%98%9F%E5%88%97"><span class="toclist-number">3.</span> <span class="toclist-text"> 合唱队列</span></a></li><li class="toclist-item toclist-level-2"><a class="toclist-link" href="#%E6%8B%A6%E6%88%AA%E5%AF%BC%E5%BC%B9"><span class="toclist-number">4.</span> <span class="toclist-text"> 拦截导弹</span></a></li><li class="toclist-item toclist-level-2"><a class="toclist-link" href="#%E6%95%B0%E5%AD%A6%E8%80%83%E8%AF%95"><span class="toclist-number">5.</span> <span class="toclist-text"> 数学考试</span></a></li><li class="toclist-item toclist-level-2"><a class="toclist-link" href="#%E5%B0%8Fa%E4%B9%B0%E5%BD%A9%E7%A5%A8"><span class="toclist-number">6.</span> <span class="toclist-text"> 小A买彩票</span></a></li><li class="toclist-item toclist-level-2"><a class="toclist-link" href="#%E8%B4%AD%E7%89%A9"><span class="toclist-number">7.</span> <span class="toclist-text"> 购物</span></a></li><li class="toclist-item toclist-level-2"><a class="toclist-link" href="#%E9%87%87%E8%8D%AF"><span class="toclist-number">8.</span> <span class="toclist-text"> 采药</span></a></li><li class="toclist-item toclist-level-2"><a class="toclist-link" href="#%E5%A4%B1%E8%A1%A1%E5%A4%A9%E5%B9%B3"><span class="toclist-number">9.</span> <span class="toclist-text"> 失衡天平</span></a></li></ol></p></div></details></div><div class="footer"><div class="p"> <span> 全站CC-BY-SA-3.0 </span><i class="fa fa-star"></i><span> Ahh</span></div><div class="by_farbox"><span>Powered by </span><a href="https://hexo.io/zh-cn/" target="_blank">Hexo </a><span> & </span><span>Anatolo </span></div><div class="beian"></div><script src="https://cdn.bootcdn.net/ajax/libs/mermaid/8.13.8/mermaid.min.js"></script></div></div><div class="main"><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>exercise6</a></h3></div><div class="post-content"><p><p>终于考完了…又开始康复训练了，</p>
<span id="more"></span>
<p>纯菜，发现很多东西去年会写的今年已经不会了，我完蛋了<br />
算了，写点东西下来吧<br />
依然在看雨巨的算法入门课<br />
啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊我怎么还在入门啊</p>
<!-- toc -->
<h2 id="花店橱窗"><a class="markdownIt-Anchor" href="#花店橱窗"></a> 花店橱窗</h2>
<p>传送门：<a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/24213/1005">花店橱窗</a><br />
题意自己看去吧<br />
线性dp+还原<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">f[i] [j]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">]</span></span></span></span>表示第i个花放在j花瓶的最大美观程度，但是必须知道第i-1个花放在了哪里，才能推出i的情况，怎么做呢，暴力枚举吧：<br />
从第一个花瓶开始向后，当前f[i] [j]的值为：i-1朵花放在k且第i朵放在j时的最大值（注意判断边界条件）<br />
状态转移：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>k</mi><mo stretchy="false">]</mo><mo>+</mo><mi>a</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>f</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f[i] [j]=max(f[i-1] [k]+a[i] [j],f[i] [j])</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mord mathdefault">x</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mclose">)</span></span></span></span><br />
答案就是扫一遍最后一行，取一个最大值<br />
还原方法：按照dp倒退回去就行<br />
贴个代码</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">105</span>;</span><br><span class="line"><span class="type">int</span> n,t,a[N][N],f,v,b[N][N],inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="type">int</span> re[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin&gt;&gt;f&gt;&gt;v;</span><br><span class="line">    <span class="type">int</span> ans=<span class="number">-1</span>*inf;</span><br><span class="line">    <span class="built_in">memset</span>(b,<span class="number">-1</span>*inf,<span class="built_in">sizeof</span>(b));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=f;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=v;j++)</span><br><span class="line">            cin&gt;&gt;a[i][j];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=v;i++) </span><br><span class="line">    &#123;</span><br><span class="line">        b[<span class="number">1</span>][i] = a[<span class="number">1</span>][i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=f;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=i;j&lt;=v-(f-i);j++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=i<span class="number">-1</span>;k&lt;=j<span class="number">-1</span>;k++)</span><br><span class="line">                b[i][j]=<span class="built_in">max</span>(b[i<span class="number">-1</span>][k]+a[i][j],b[i][j]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=v;i++)</span><br><span class="line">            ans=<span class="built_in">max</span>(ans,b[f][i]);</span><br><span class="line">    <span class="type">int</span> reans=ans;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=f;i&gt;=<span class="number">1</span>;i--)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=v;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(b[i][j]==reans)</span><br><span class="line">            &#123;</span><br><span class="line">                re[i]=j;</span><br><span class="line">                reans-=a[i][j];<span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    cout&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=f;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;re[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="传球游戏"><a class="markdownIt-Anchor" href="#传球游戏"></a> 传球游戏</h2>
<p>传送门：<a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/24213/1009">传球游戏</a><br />
这题就是一个很简单的线性dp，状态转移方程很好想，因为每次只能传给左右两边，所以就讲上一次在左边的情况加上上一次在右边的情况即可。<br />
dp[i] [j]为第i次传球在j手上的方法数<br />
需要注意的是，所有人是一个圈，所以还需要mod一下，用0表示n</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">50</span>;</span><br><span class="line"><span class="type">int</span> n,m,dp[N][N];<span class="comment">//第i次传球在j手上的答案</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    dp[<span class="number">1</span>][<span class="number">2</span>]=<span class="number">1</span>;dp[<span class="number">1</span>][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            dp[i][j]=dp[i<span class="number">-1</span>][(j<span class="number">-1</span>+n)%n]+dp[i<span class="number">-1</span>][(j+<span class="number">1</span>)%n];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;dp[m][<span class="number">1</span>]&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="合唱队列"><a class="markdownIt-Anchor" href="#合唱队列"></a> 合唱队列</h2>
<p>传送门：<a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/24213/1011">合唱队列</a><br />
最长上升子序列问题，从左到右算一遍，再从右到左算一遍最长下降子序列，以i为分界，左边的最大上升子序列+右边的最大下降子序列，因为都包含i，所以要减一</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">3005</span>;</span><br><span class="line"><span class="type">int</span> n,a[N],d[N],p[N];<span class="comment">//以i为中点 j为必须包含数</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    cin&gt;&gt;a[i];</span><br><span class="line">    d[<span class="number">1</span>]=<span class="number">1</span>,p[n]=<span class="number">1</span>;<span class="comment">//zeng</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> mmax=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;i;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[j]&lt;a[i]) mmax=<span class="built_in">max</span>(d[j]+<span class="number">1</span>,mmax);</span><br><span class="line">        &#125;</span><br><span class="line">        d[i]=mmax;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=n;i&gt;<span class="number">0</span>;i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> mmax=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=n;j&gt;i;j--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[j]&lt;a[i]) mmax=<span class="built_in">max</span>(p[j]+<span class="number">1</span>,mmax);</span><br><span class="line">        &#125;</span><br><span class="line">        p[i]=mmax;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mmax=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//cout&lt;&lt;d[i]&lt;&lt;&quot; &quot;&lt;&lt;p[i]&lt;&lt;endl;</span></span><br><span class="line">        mmax=<span class="built_in">max</span>(d[i]+p[i]<span class="number">-1</span>,mmax);</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;n-mmax&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="拦截导弹"><a class="markdownIt-Anchor" href="#拦截导弹"></a> 拦截导弹</h2>
<p>传送门：<a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/24213/1012">拦截导弹</a></p>
<p>这题很好看出第一问是一个最长不上升子序列，但是第二问还挺难想的<br />
贴一个我觉得讲的很好的题解<a target="_blank" rel="noopener" href="https://blog.csdn.net/RIPKEY/article/details/124538097">点击</a><br />
这题卡了一下LIS的时间复杂度，dp的方法是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>,用dp+贪心+二分只要<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span><br />
都贴一下代码吧</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">100005</span>;</span><br><span class="line"><span class="type">int</span> n=<span class="number">1</span>,a[N],d[N],p[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(cin&gt;&gt;a[n])</span><br><span class="line">    &#123;</span><br><span class="line">        n++;</span><br><span class="line">    &#125;n--;</span><br><span class="line">    <span class="type">int</span> mmmax=<span class="number">1</span>,mmmax2=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> mmax=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;i;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[j]&gt;a[i]) mmax=<span class="built_in">max</span>(d[j]+<span class="number">1</span>,mmax);</span><br><span class="line">        &#125;</span><br><span class="line">        d[i]=mmax;</span><br><span class="line">        mmmax=<span class="built_in">max</span>(mmmax,d[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> mmax=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;i;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[j]&lt;=a[i]) mmax=<span class="built_in">max</span>(p[j]+<span class="number">1</span>,mmax);</span><br><span class="line">        &#125;</span><br><span class="line">        p[i]=mmax;</span><br><span class="line">        mmmax2=<span class="built_in">max</span>(mmmax2,p[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;mmmax&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;mmmax2&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第二种方法，具体解释那个帖子里也有</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">100005</span>;</span><br><span class="line"><span class="type">int</span> n=<span class="number">1</span>,a[N],d[N];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;vec;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(cin&gt;&gt;a[n])</span><br><span class="line">    &#123;</span><br><span class="line">     n++;</span><br><span class="line"> &#125;n--;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> pos1=<span class="built_in">upper_bound</span>(vec.<span class="built_in">begin</span>(),vec.<span class="built_in">end</span>(),a[i],<span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;());</span><br><span class="line">        <span class="keyword">if</span>(pos1==vec.<span class="built_in">end</span>()) vec.<span class="built_in">push_back</span>(a[i]);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        vec[pos1-vec.<span class="built_in">begin</span>()]=a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> nn=vec.<span class="built_in">size</span>();</span><br><span class="line">    cout&lt;&lt;nn&lt;&lt;endl;</span><br><span class="line">    vec.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> pos1=<span class="built_in">lower_bound</span>(vec.<span class="built_in">begin</span>(),vec.<span class="built_in">end</span>(),a[i]);</span><br><span class="line">        <span class="keyword">if</span>(pos1==vec.<span class="built_in">end</span>()) vec.<span class="built_in">push_back</span>(a[i]);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        vec[pos1-vec.<span class="built_in">begin</span>()]=a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    nn=vec.<span class="built_in">size</span>();</span><br><span class="line">    cout&lt;&lt;nn&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="数学考试"><a class="markdownIt-Anchor" href="#数学考试"></a> 数学考试</h2>
<p>传送门：<a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/24213/1013">数学考试</a></p>
<p>这题我感觉…怎么说呢 感觉很暴力<br />
先统计一下以i为起点，长度为k的字段和为多少<br />
然后从左到右求一下以i为分割，左边的最大值<br />
从右往左再求一下i右边的最大值<br />
再遍历一遍，就得到答案了</p>
<p>后面看了一下别的题解，可以用前缀和优化一下（55555我又没想到，感觉这个挺好想的呀）<br />
WA了几发在数据范围上…为什么我又不开longlong啊</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">2e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="type">int</span> t,n,k,a[N],d[N],l[N],r[N];</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> INF=<span class="number">-0x3f3f3f3f</span>;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);cin.<span class="built_in">tie</span>(<span class="number">0</span>);cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cin&gt;&gt;t;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(d,INF,<span class="built_in">sizeof</span>(d));</span><br><span class="line">        <span class="built_in">memset</span>(l,INF,<span class="built_in">sizeof</span>(l));</span><br><span class="line">        <span class="built_in">memset</span>(r,INF,<span class="built_in">sizeof</span>(r));</span><br><span class="line">        cin&gt;&gt;n&gt;&gt;k;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            cin&gt;&gt;a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> cnt=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            cnt+=a[i];</span><br><span class="line">            <span class="keyword">if</span>(i==k) d[i]=cnt;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(i&gt;k)</span><br><span class="line">            &#123;</span><br><span class="line">                cnt-=a[i-k];</span><br><span class="line">                d[i]=cnt;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> maxl=<span class="number">-1e18</span>,maxr=<span class="number">-1e18</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=k;i&lt;=(n-k);i++)</span><br><span class="line">        &#123;</span><br><span class="line">            l[i]=<span class="built_in">max</span>(l[i<span class="number">-1</span>],d[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=(n-k);i&gt;=k;i--)</span><br><span class="line">        &#123;</span><br><span class="line">            r[i]=<span class="built_in">max</span>(r[i+<span class="number">1</span>],d[i+k]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> mm=<span class="number">-1e18</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=k;i&lt;=(n-k);i++)</span><br><span class="line">        &#123;</span><br><span class="line">            mm=<span class="built_in">max</span>(mm,l[i]+r[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        cout&lt;&lt;mm&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="小a买彩票"><a class="markdownIt-Anchor" href="#小a买彩票"></a> 小A买彩票</h2>
<p>传送门：<a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/24213/1014">小A买彩票</a><br />
…这题好像是之前天梯赛选拔一模一样的题目 好像当时dfs搜的还是干嘛的 没出的来<br />
现在一看 这不还是简单dp吗 dp[i] [j]表示第i张彩票赚j元的情况<br />
dp[i] [j]=dp[i-1] [j-1]+dp[i-1] [j-2]+dp[i-1] [j-3]+dp[i-1] [j-4]<br />
特判需要注意下</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> dp[<span class="number">35</span>][<span class="number">150</span>];</span><br><span class="line"><span class="function"><span class="type">long</span> <span class="type">long</span> <span class="title">quickpow</span><span class="params">(<span class="type">long</span> <span class="type">long</span> a,<span class="type">long</span> <span class="type">long</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> res=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(p)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(p&amp;<span class="number">1</span>) res=res*a;</span><br><span class="line">        a=a*a;</span><br><span class="line">        p&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    dp[<span class="number">1</span>][<span class="number">1</span>]=<span class="number">1</span>;dp[<span class="number">1</span>][<span class="number">2</span>]=<span class="number">1</span>;dp[<span class="number">1</span>][<span class="number">3</span>]=<span class="number">1</span>;dp[<span class="number">1</span>][<span class="number">4</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=i;j&lt;=<span class="number">4</span>*i;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=<span class="number">4</span>;k++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(k&lt;=j) dp[i][j]+=dp[i<span class="number">-1</span>][j-k];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="comment">//不亏本</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">3</span>*n;i&lt;=<span class="number">4</span>*n;i++)</span><br><span class="line">    sum+=dp[n][i];</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> sumd;</span><br><span class="line">    sumd=<span class="built_in">quickpow</span>(<span class="number">4</span>,n);</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> g=__gcd(sum,sumd);</span><br><span class="line">    sum/=g;</span><br><span class="line">    sumd/=g;</span><br><span class="line">    <span class="keyword">if</span> (n==<span class="number">0</span>) sum=<span class="number">1</span>,sumd=<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld/%lld\n&quot;</span>,sum,sumd);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="购物"><a class="markdownIt-Anchor" href="#购物"></a> 购物</h2>
<p>传送门：<a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/24213/1015">购物</a></p>
<p>dp[i] [j]表示第i天买j东西的最少费用<br />
首先要对每天的东西进行一个排序，要是一定要买2个糖，肯定买便宜的啊<br />
用一个mai[i] [j]数组记录一下第i天买j个糖花的钱<br />
转移方程：dp[i] [j]=min(dp[i] [j],dp[i-1] [k]+mai[i] [j-k]+(j-k)*(j-k))<br />
k就是枚举的每天买的糖<br />
注意一下边界条件 必须保证i天有i个糖<br />
有点像那个花店橱窗 发现我每次到暴力的时候反而不知道怎么写了…</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">305</span>;</span><br><span class="line"><span class="type">int</span> n,m,a[N][N],mai[N][N],dp[N][N];<span class="comment">//第i天买j东西的最少费用</span></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);cin.<span class="built_in">tie</span>(<span class="number">0</span>);cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="built_in">memset</span>(dp,<span class="number">0x3f3f3f3f</span>,<span class="built_in">sizeof</span>(dp));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            cin&gt;&gt;a[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    <span class="built_in">sort</span>(a[i]+<span class="number">1</span>,a[i]+<span class="number">1</span>+m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            mai[i][j]=mai[i][j<span class="number">-1</span>]+a[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)<span class="comment">//第1天</span></span><br><span class="line">        dp[<span class="number">1</span>][i]=mai[<span class="number">1</span>][i]+i*i;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=i;j&lt;=n;j++)<span class="comment">//至少i个</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;=j;k++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(j-k&lt;=m)</span><br><span class="line">                dp[i][j]=<span class="built_in">min</span>(dp[i][j],dp[i<span class="number">-1</span>][k]+mai[i][j-k]+(j-k)*(j-k));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;dp[n][n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="采药"><a class="markdownIt-Anchor" href="#采药"></a> 采药</h2>
<p>传送门：<a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/24213/1018">采药</a><br />
其实感觉我对于背包问题的理解一直不是特别透彻，我会写题，但是感觉就是很钝，借这题梳理一遍。</p>
<p>这题就是经典的01背包问题<br />
dp[i] [j]选前i个物品所占体积j的最大价值<br />
两个状态：选第i个物品或者不选第i个物品，从i-1的状态转化过来。注意：如果没有办法舍弃原先的体积选择装入该物品（就是已用体积比w[i]小）还是要继承前面i-1的情况的。<br />
先说一下这里的初始化有两种情况，如果题目问的是恰好最后体积为V，那么初始化就要设置为-INF，而如果不需要恰好，可以初始化为0，就好比一开始给每个位置占任意体积的空气一样。<br />
贴个代码</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">105</span>;</span><br><span class="line"><span class="type">int</span> t,m,v[N],w[N],dp[N][<span class="number">1005</span>];<span class="comment">//前i个花j时的最大价值</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin&gt;&gt;t&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin&gt;&gt;w[i]&gt;&gt;v[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=t;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(j&gt;=w[i])</span><br><span class="line">            dp[i][j]=<span class="built_in">max</span>(dp[i<span class="number">-1</span>][j],dp[i<span class="number">-1</span>][j-w[i]]+v[i]);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            dp[i][j]=dp[i<span class="number">-1</span>][j];</span><br><span class="line">        &#125;</span><br><span class="line">    cout&lt;&lt;dp[m][t]&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>进一步可以<strong>优化空间复杂度</strong><br />
我们发现每一次i的更新只与i-1有关，那么其实不需要记录前面i-2甚至更远的数据，可以采用01滚动的方式，当然，其实直接降成一维的也可以，我们注意到，</p>
<h2 id="失衡天平"><a class="markdownIt-Anchor" href="#失衡天平"></a> 失衡天平</h2>
<p>传送门：<a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/24213/1015">失衡天平</a></p>
</p></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2023-04-18</span><i class="fa fa-tag"></i><a class="tag" href="/tags/acm/" title="acm">acm </a><span class="leancloud_visitors"></span><span>大约2657个字, 8分钟51秒读完</span></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="" onclick="javascript:join_favorite()" ref="sidebar"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,http://wxhxyyzm.github.io/2023/04/18/exercise6/,Ahh's blog,exercise6,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2023/05/12/git/" title="git版本管理+GitHub/GitLab教程">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2023/02/15/exercise5/" title="exercise5">下一篇</a></li></ul></div><script src="/js/visitors.js"></script><a id="comments"></a><div id="vcomments" style="margin:0 30px;"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/gh/xcss/valine@latest/dist/Valine.min.js"></script><script>var valine = new Valine({
  el:'#vcomments',
  notify:false || false, 
  verify:false|| false, 
  app_id:'H0VO204MWoxwKbBGEHeez2oX-gzGzoHsz',
  app_key:'hFyVWhXHYgVmaKMGWHzhEZcZ',
  placeholder:'Ahh终于更新了',
  path: window.location.pathname,
  serverURLs: '',
  visitor:true,
  recordIP:true,
  avatar:'retro'
})</script></div></div></div></div><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/add-bookmark.js"></script><script>(function(window){var INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(无标题)",},CONTENT_URL:"/content.json",};window.INSIGHT_CONFIG=INSIGHT_CONFIG})(window);</script><script src="/js/insight.js" defer></script><div class="searchbox ins-search"><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input class="searchbox-input ins-search-input" type="text" placeholder="想要查找什么..."><span class="searchbox-close"><a class="fa fa-times-circle" onclick="closeWindow();"></a></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"><p>Seraching...</p></div></div></div></div></body></html>